"use strict";(self.webpackChunkreact_frontend_init=self.webpackChunkreact_frontend_init||[]).push([[1512],{59202:function(Lu,uu,o){o.r(uu),o.d(uu,{default:function(){return bu}});var ru=o(90785),g=o.n(ru),m=o(67294),k=o(26058),K=o(71471),nu=o(78957),I=o(83622),eu=o(4393),tu=o(53531),J=o(96074),R=o(17788),Q=o(29092),su=o(1470),iu=o(56989),cu=o(6620),lu=o(64581),V=o.n(lu),ou=o(13114),du={up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight"},Wu=function(F){return F.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},vu=function(F){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},A=h.threshold,S=A===void 0?50:A,T=h.timeout,p=T===void 0?300:T,B=(0,m.useRef)(null),Z=(0,m.useRef)(0),N=(0,m.useRef)(0),y=(0,m.useRef)(0);return(0,m.useEffect)(function(){var x=B.current;if(x){var G=function(E){Z.current=E.touches[0].clientX,N.current=E.touches[0].clientY,y.current=Date.now()},M=function(E){if(y.current){var L=E.changedTouches[0].clientX-Z.current,W=E.changedTouches[0].clientY-N.current,X=Date.now()-y.current;if(!(X>p)){var C=Math.abs(L),O=Math.abs(W);Math.max(C,O)>S&&(C>O?F(L>0?"right":"left"):F(W>0?"down":"up"))}}};return x.addEventListener("touchstart",G),x.addEventListener("touchend",M),function(){x.removeEventListener("touchstart",G),x.removeEventListener("touchend",M)}}},[F,S,p]),{ref:B}},e=o(85893),fu=function(F){var h=F.onScoreUpdate,A=F.onGameOver,S=F.onGameWon,T=(0,m.useState)([]),p=g()(T,2),B=p[0],Z=p[1],N=(0,m.useState)(0),y=g()(N,2),x=y[0],G=y[1],M=(0,m.useState)(Array(4).fill(0).map(function(){return Array(4).fill(0)})),P=g()(M,2),E=P[0],L=P[1],W=(0,m.useState)(!1),X=g()(W,2),C=X[0],O=X[1];(0,m.useEffect)(function(){$()},[]);var $=function(){var r=Array(4).fill(0).map(function(){return Array(4).fill(0)}),i=[];H(r,i),H(r,i),L(r),Z(i),G(0),O(!1),h(0),A(!1),S(!1)},H=function(r,i){for(var s=[],d=0;d<4;d++)for(var u=0;u<4;u++)r[d][u]===0&&s.push([d,u]);if(s.length>0){var f=g()(s[Math.floor(Math.random()*s.length)],2),t=f[0],v=f[1],a=Math.random()<.9?2:4;r[t][v]=a,i.push({id:"".concat(t,"-").concat(v,"-").concat(Date.now()),value:a,row:t,col:v,isNew:!0})}},q=function(r,i){for(var s=!1,d=x,u=r.map(function(U){return V()(U)}),f=new Set,t=0;t<4;t++)for(var v=1;v<4;v++)if(u[t][v]!==0){for(var a=v;a>0&&u[t][a-1]===0;)u[t][a-1]=u[t][a],u[t][a]=0,a--,s=!0;a>0&&u[t][a-1]===u[t][a]&&!f.has("".concat(t,"-").concat(a-1))&&(u[t][a-1]*=2,u[t][a]=0,d+=u[t][a-1],f.add("".concat(t,"-").concat(a-1)),s=!0)}for(var j=[],c=0;c<4;c++)for(var l=0;l<4;l++)u[c][l]!==0&&j.push({id:"".concat(c,"-").concat(l,"-").concat(Date.now()),value:u[c][l],row:c,col:l,isMerged:f.has("".concat(c,"-").concat(l))});return{newGrid:u,newTiles:j,newScore:d,moved:s}},Y=function(r,i){for(var s=!1,d=x,u=r.map(function(U){return V()(U)}),f=new Set,t=0;t<4;t++)for(var v=2;v>=0;v--)if(u[t][v]!==0){for(var a=v;a<3&&u[t][a+1]===0;)u[t][a+1]=u[t][a],u[t][a]=0,a++,s=!0;a<3&&u[t][a+1]===u[t][a]&&!f.has("".concat(t,"-").concat(a+1))&&(u[t][a+1]*=2,u[t][a]=0,d+=u[t][a+1],f.add("".concat(t,"-").concat(a+1)),s=!0)}for(var j=[],c=0;c<4;c++)for(var l=0;l<4;l++)u[c][l]!==0&&j.push({id:"".concat(c,"-").concat(l,"-").concat(Date.now()),value:u[c][l],row:c,col:l,isMerged:f.has("".concat(c,"-").concat(l))});return{newGrid:u,newTiles:j,newScore:d,moved:s}},b=function(r,i){for(var s=!1,d=x,u=r.map(function(U){return V()(U)}),f=new Set,t=0;t<4;t++)for(var v=1;v<4;v++)if(u[v][t]!==0){for(var a=v;a>0&&u[a-1][t]===0;)u[a-1][t]=u[a][t],u[a][t]=0,a--,s=!0;a>0&&u[a-1][t]===u[a][t]&&!f.has("".concat(a-1,"-").concat(t))&&(u[a-1][t]*=2,u[a][t]=0,d+=u[a-1][t],f.add("".concat(a-1,"-").concat(t)),s=!0)}for(var j=[],c=0;c<4;c++)for(var l=0;l<4;l++)u[c][l]!==0&&j.push({id:"".concat(c,"-").concat(l,"-").concat(Date.now()),value:u[c][l],row:c,col:l,isMerged:f.has("".concat(c,"-").concat(l))});return{newGrid:u,newTiles:j,newScore:d,moved:s}},w=function(r,i){for(var s=!1,d=x,u=r.map(function(U){return V()(U)}),f=new Set,t=0;t<4;t++)for(var v=2;v>=0;v--)if(u[v][t]!==0){for(var a=v;a<3&&u[a+1][t]===0;)u[a+1][t]=u[a][t],u[a][t]=0,a++,s=!0;a<3&&u[a+1][t]===u[a][t]&&!f.has("".concat(a+1,"-").concat(t))&&(u[a+1][t]*=2,u[a][t]=0,d+=u[a+1][t],f.add("".concat(a+1,"-").concat(t)),s=!0)}for(var j=[],c=0;c<4;c++)for(var l=0;l<4;l++)u[c][l]!==0&&j.push({id:"".concat(c,"-").concat(l,"-").concat(Date.now()),value:u[c][l],row:c,col:l,isMerged:f.has("".concat(c,"-").concat(l))});return{newGrid:u,newTiles:j,newScore:d,moved:s}},Tu=function(r){for(var i=0;i<4;i++)for(var s=0;s<4;s++)if(r[i][s]===0)return!1;for(var d=0;d<4;d++)for(var u=0;u<4;u++){var f=r[d][u];if(u<3&&r[d][u+1]===f||d<3&&r[d+1][u]===f)return!1}return!0},Zu=function(r){for(var i=0;i<4;i++)for(var s=0;s<4;s++)if(r[i][s]===2048)return!0;return!1},_=(0,m.useCallback)(function(n){var r;switch(n){case"ArrowLeft":r=q(E,B);break;case"ArrowRight":r=Y(E,B);break;case"ArrowUp":r=b(E,B);break;case"ArrowDown":r=w(E,B);break;default:return}if(r.moved){var i=r,s=i.newGrid,d=i.newTiles,u=i.newScore;H(s,d),L(s),Z(d),G(u),h(u),!C&&Zu(s)&&(O(!0),S(!0)),Tu(s)&&A(!0)}},[E,B,x,C,h,A,S]);(0,m.useEffect)(function(){var n=function(i){["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(i.key)&&(i.preventDefault(),_(i.key))};return window.addEventListener("keydown",n),function(){window.removeEventListener("keydown",n)}},[_]);var Nu=vu(function(n){var r=du[n];r&&_(r)}),Gu=Nu.ref,Mu=function(r){var i={2:"bg-amber-100",4:"bg-amber-200",8:"bg-orange-300",16:"bg-orange-400",32:"bg-orange-500",64:"bg-orange-600",128:"bg-yellow-300",256:"bg-yellow-400",512:"bg-yellow-500",1024:"bg-yellow-600",2048:"bg-yellow-700"};return i[r]||"bg-yellow-800"},Pu=function(r){return r<=4?"text-gray-700":"text-white"},au=function(r){var i=r.toString();return i.length<=1?"text-4xl":i.length===2?"text-3xl":i.length===3?"text-2xl":"text-xl"};return(0,e.jsxs)("div",{ref:Gu,className:"relative bg-amber-300 rounded-lg p-2 sm:p-4 shadow-lg",style:{aspectRatio:"1/1",maxWidth:"500px",margin:"0 auto"},children:[(0,e.jsx)("div",{className:"grid grid-cols-4 gap-2 sm:gap-3 h-full w-full",children:Array(16).fill(0).map(function(n,r){return(0,e.jsx)("div",{className:"bg-amber-400 rounded-md"},r)})}),(0,e.jsx)("div",{className:"absolute inset-0 p-2 sm:p-4",children:(0,e.jsx)("div",{className:"relative h-full w-full",children:(0,e.jsx)(ou.M,{children:B.map(function(n){return(0,e.jsxs)(Q.E.div,{initial:{scale:n.isNew?0:1},animate:{scale:1,x:"calc(".concat(n.col*100,"% + ").concat(n.col*8,"px)"),y:"calc(".concat(n.row*100,"% + ").concat(n.row*8,"px)")},exit:{scale:0},transition:{type:"spring",stiffness:200,damping:20},className:`absolute flex items-center justify-center rounded-md
                  `.concat(Mu(n.value)," ").concat(Pu(n.value),`
                  font-bold w-[calc(25%-6px)] h-[calc(25%-6px)]`),children:[n.isMerged&&(0,e.jsx)(Q.E.div,{initial:{scale:.8},animate:{scale:1.1},transition:{duration:.1},className:"".concat(au(n.value)),children:n.value}),!n.isMerged&&(0,e.jsx)("div",{className:"".concat(au(n.value)),children:n.value})]},n.id)})})})})]})},mu=fu,hu=o(42119),Fu=o(53219),Eu=o(82701),xu=o(61749),gu=o(76998),Au=o(41962),Bu=K.Z.Title,D=K.Z.Paragraph,ju=K.Z.Text,pu=function(F){var h=F.open,A=F.onClose;return(0,e.jsx)(R.Z,{title:(0,e.jsx)(Bu,{level:3,children:"2048 \u6E38\u620F\u8BF4\u660E"}),open:h,onCancel:A,footer:null,width:600,children:(0,e.jsxs)(K.Z,{children:[(0,e.jsx)(D,{children:"2048 \u662F\u4E00\u6B3E\u7B80\u5355\u800C\u6709\u8DA3\u7684\u6570\u5B57\u76CA\u667A\u6E38\u620F\u3002\u6E38\u620F\u7684\u76EE\u6807\u662F\u5728\u7F51\u683C\u4E0A\u6ED1\u52A8\u65B9\u5757\uFF0C\u5C06\u76F8\u540C\u6570\u5B57\u7684\u65B9\u5757\u5408\u5E76\uFF0C\u6700\u7EC8\u83B7\u5F97\u4E00\u4E2A\u6570\u503C\u4E3A 2048 \u7684\u65B9\u5757\u3002"}),(0,e.jsx)(J.Z,{orientation:"left",children:"\u6E38\u620F\u89C4\u5219"}),(0,e.jsx)(hu.Z,{direction:"vertical",items:[{title:"\u79FB\u52A8\u65B9\u5757",description:(0,e.jsx)("div",{children:(0,e.jsxs)(D,{children:["\u4F7F\u7528\u952E\u76D8\u65B9\u5411\u952E ",(0,e.jsx)(Fu.Z,{className:"inline h-4 w-4"})," ",(0,e.jsx)(Eu.Z,{className:"inline h-4 w-4"})," ",(0,e.jsx)(xu.Z,{className:"inline h-4 w-4"})," ",(0,e.jsx)(gu.Z,{className:"inline h-4 w-4"})," \u6216\u5728\u89E6\u6478\u5C4F\u4E0A\u6ED1\u52A8 ",(0,e.jsx)(Au.Z,{className:"inline h-4 w-4"})," \u6765\u79FB\u52A8\u6240\u6709\u65B9\u5757\u3002"]})})},{title:"\u5408\u5E76\u65B9\u5757",description:(0,e.jsx)(D,{children:'\u5F53\u4E24\u4E2A\u76F8\u540C\u6570\u5B57\u7684\u65B9\u5757\u76F8\u649E\u65F6\uFF0C\u5B83\u4EEC\u4F1A\u5408\u5E76\u6210\u4E3A\u4E00\u4E2A\u65B0\u7684\u65B9\u5757\uFF0C\u5176\u6570\u503C\u662F\u539F\u6765\u4E24\u4E2A\u65B9\u5757\u7684\u603B\u548C\u3002\u4F8B\u5982\uFF0C\u4E24\u4E2A "2" \u65B9\u5757\u4F1A\u5408\u5E76\u6210\u4E00\u4E2A "4" \u65B9\u5757\u3002'})},{title:"\u65B0\u65B9\u5757\u51FA\u73B0",description:(0,e.jsx)(D,{children:"\u6BCF\u6B21\u79FB\u52A8\u540E\uFF0C\u5982\u679C\u6709\u65B9\u5757\u79FB\u52A8\u6216\u5408\u5E76\uFF0C\u4E00\u4E2A\u65B0\u7684\u65B9\u5757\uFF08\u6570\u503C\u4E3A 2 \u6216 4\uFF09\u4F1A\u968F\u673A\u51FA\u73B0\u5728\u7A7A\u767D\u4F4D\u7F6E\u3002"})},{title:"\u6E38\u620F\u76EE\u6807",description:(0,e.jsx)(D,{children:"\u6E38\u620F\u7684\u4E3B\u8981\u76EE\u6807\u662F\u521B\u5EFA\u4E00\u4E2A\u6570\u503C\u4E3A 2048 \u7684\u65B9\u5757\u3002\u8FBE\u6210\u8FD9\u4E2A\u76EE\u6807\u540E\uFF0C\u60A8\u53EF\u4EE5\u7EE7\u7EED\u6E38\u620F\uFF0C\u5C1D\u8BD5\u83B7\u5F97\u66F4\u9AD8\u7684\u5206\u6570\u548C\u66F4\u5927\u7684\u6570\u5B57\u65B9\u5757\u3002"})},{title:"\u6E38\u620F\u7ED3\u675F",description:(0,e.jsx)(D,{children:"\u5F53\u7F51\u683C\u586B\u6EE1\u4E14\u6CA1\u6709\u53EF\u4EE5\u5408\u5E76\u7684\u76F8\u90BB\u65B9\u5757\u65F6\uFF0C\u6E38\u620F\u7ED3\u675F\u3002"})}]}),(0,e.jsx)(J.Z,{orientation:"left",children:"\u6E38\u620F\u6280\u5DE7"}),(0,e.jsx)(D,{children:(0,e.jsxs)("ul",{className:"list-disc pl-5",children:[(0,e.jsx)("li",{children:"\u5C3D\u91CF\u4FDD\u6301\u5927\u6570\u503C\u7684\u65B9\u5757\u5728\u89D2\u843D\u4F4D\u7F6E"}),(0,e.jsx)("li",{children:"\u5C1D\u8BD5\u4FDD\u6301\u65B9\u5757\u6709\u5E8F\u6392\u5217\uFF0C\u907F\u514D\u5C0F\u6570\u503C\u65B9\u5757\u6563\u5E03\u5728\u7F51\u683C\u4E2D"}),(0,e.jsx)("li",{children:"\u63D0\u524D\u89C4\u5212\u60A8\u7684\u79FB\u52A8\uFF0C\u8003\u8651\u51E0\u6B65\u4E4B\u540E\u7684\u5C40\u9762"}),(0,e.jsx)("li",{children:"\u907F\u514D\u9891\u7E41\u5730\u4E0A\u4E0B\u5DE6\u53F3\u6765\u56DE\u79FB\u52A8\uFF0C\u8FD9\u53EF\u80FD\u5BFC\u81F4\u5C0F\u6570\u503C\u65B9\u5757\u5206\u6563"})]})}),(0,e.jsx)(J.Z,{}),(0,e.jsx)(D,{className:"text-center",children:(0,e.jsx)(ju,{type:"secondary",children:"\u795D\u60A8\u6E38\u620F\u6109\u5FEB\uFF01"})})]})})},Du=pu,Su=k.Z.Header,yu=k.Z.Content,Ou=k.Z.Footer,Uu=K.Z.Title;function Cu(){var z=(0,m.useState)(0),F=g()(z,2),h=F[0],A=F[1],S=(0,m.useState)(function(){var b=localStorage.getItem("bestScore");return b?parseInt(b,10):0}),T=g()(S,2),p=T[0],B=T[1],Z=(0,m.useState)(!1),N=g()(Z,2),y=N[0],x=N[1],G=(0,m.useState)(!1),M=g()(G,2),P=M[0],E=M[1],L=(0,m.useState)(!1),W=g()(L,2),X=W[0],C=W[1],O=(0,m.useState)(0),$=g()(O,2),H=$[0],q=$[1];(0,m.useEffect)(function(){h>p&&(B(h),localStorage.setItem("bestScore",h.toString()))},[h,p]);var Y=function(){A(0),x(!1),E(!1),q(function(w){return w+1})};return(0,e.jsxs)(k.Z,{style:{borderRadius:20},className:"min-h-screen bg-gradient-to-b from-amber-50 to-orange-100",children:[(0,e.jsxs)(Su,{style:{borderRadius:20},className:"flex items-center justify-between px-4 sm:px-6 bg-amber-500 shadow-md",children:[(0,e.jsx)("div",{className:"flex items-center",children:(0,e.jsx)(Q.E.div,{initial:{rotate:0},animate:{rotate:360},transition:{duration:.5},children:(0,e.jsx)(su.Z,{className:"h-8 w-8 text-yellow-100 mr-2"})})}),(0,e.jsxs)(nu.Z,{children:[(0,e.jsx)(I.ZP,{type:"text",icon:(0,e.jsx)(iu.Z,{className:"h-5 w-5 text-white"}),onClick:function(){return C(!0)},className:"text-white hover:text-yellow-100"}),(0,e.jsx)(I.ZP,{type:"text",icon:(0,e.jsx)(cu.Z,{className:"h-5 w-5 text-white"}),onClick:Y,className:"text-white hover:text-yellow-100"})]})]}),(0,e.jsxs)(yu,{className:"p-4 sm:p-6 max-w-2xl mx-auto",children:[(0,e.jsxs)("div",{className:"mb-6 flex flex-wrap justify-between items-center gap-4",children:[(0,e.jsx)(eu.Z,{className:"bg-amber-100 border-amber-200 shadow-sm",children:(0,e.jsx)(tu.Z,{title:"\u5F53\u524D\u5206\u6570",value:h,valueStyle:{color:"#d97706"}})}),(0,e.jsx)(eu.Z,{className:"bg-amber-100 border-amber-200 shadow-sm",children:(0,e.jsx)(tu.Z,{title:"\u6700\u9AD8\u5206\u6570",value:p,valueStyle:{color:"#b45309"}})}),(0,e.jsx)(I.ZP,{type:"primary",onClick:Y,size:"large",className:"bg-amber-600 hover:bg-amber-700 border-amber-700",children:"\u91CD\u65B0\u5F00\u59CB"})]}),(0,e.jsx)(Q.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-6",children:(0,e.jsx)(mu,{onScoreUpdate:A,onGameOver:x,onGameWon:E},H)}),(0,e.jsx)(J.Z,{className:"border-amber-200",children:"\u6E38\u620F\u8BF4\u660E"}),(0,e.jsxs)("div",{className:"text-center text-gray-600 mb-4",children:[(0,e.jsx)("p",{children:"\u4F7F\u7528\u952E\u76D8\u65B9\u5411\u952E\u6216\u6ED1\u52A8\u5C4F\u5E55\u6765\u79FB\u52A8\u65B9\u5757"}),(0,e.jsx)("p",{children:"\u76F8\u540C\u6570\u5B57\u7684\u65B9\u5757\u76F8\u649E\u65F6\u4F1A\u5408\u5E76\u6210\u4E3A\u5B83\u4EEC\u7684\u548C"}),(0,e.jsx)("p",{children:"\u76EE\u6807\u662F\u83B7\u5F97\u4E00\u4E2A2048\u7684\u65B9\u5757"})]})]}),(0,e.jsx)(R.Z,{title:"\u6E38\u620F\u7ED3\u675F",open:y&&!P,footer:[(0,e.jsx)(I.ZP,{type:"primary",onClick:Y,children:"\u518D\u73A9\u4E00\u6B21"},"reset")],closable:!1,centered:!0,children:(0,e.jsxs)("p",{children:["\u6E38\u620F\u7ED3\u675F\uFF01\u60A8\u7684\u6700\u7EC8\u5F97\u5206\u662F ",h," \u5206\u3002"]})}),(0,e.jsxs)(R.Z,{title:"\u606D\u559C\u60A8\uFF01",open:P,footer:[(0,e.jsx)(I.ZP,{onClick:function(){return E(!1)},children:"\u7EE7\u7EED\u6E38\u620F"},"continue"),(0,e.jsx)(I.ZP,{type:"primary",onClick:Y,children:"\u91CD\u65B0\u5F00\u59CB"},"reset")],closable:!1,centered:!0,children:[(0,e.jsxs)("p",{children:["\u60A8\u6210\u529F\u83B7\u5F97\u4E862048\u65B9\u5757\uFF01\u60A8\u7684\u5F53\u524D\u5F97\u5206\u662F ",h," \u5206\u3002"]}),(0,e.jsx)("p",{children:"\u60A8\u53EF\u4EE5\u9009\u62E9\u7EE7\u7EED\u6E38\u620F\u6216\u91CD\u65B0\u5F00\u59CB\u3002"})]}),(0,e.jsx)(Du,{open:X,onClose:function(){return C(!1)}})]})}var bu=Cu}}]);
